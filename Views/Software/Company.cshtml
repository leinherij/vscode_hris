@{

}

    <section id="container" >
    <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
      <!--header start-->
      <header class="header black-bg">
              <div class="sidebar-toggle-box">
                  <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
              </div>
            <!--logo start-->
            <a href="../Software/MainMenu" class="logo"><b>HRIS</b></a>
            <!--logo end-->
            <div class="top-menu">
            	<ul class="nav pull-right top-menu">
                    <!--<li><button class="btn btn-danger" style="margin-top:13px;margin-right:10px;"  href="login.html">Logout</button></li>-->
            	</ul>
            </div>
        </header>
      <!--header end-->
      <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
      <!--sidebar start-->
      <aside>
          <div id="sidebar"  class="nav-collapse ">
              <!-- sidebar menu start-->
              <ul class="sidebar-menu" id="nav-accordion">
                  <li class="mt">
                      <a href="MainMenu">
                          <i class="fa fa-dashboard"></i>
                          <span>Dashboard</span>
                      </a>
                  </li>
                  <li  class="sub-menu">
                      <a class="active" href="javascript:;" >
                          <i class="fa fa-cogs"></i>
                          <span>Setup</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="Employee#">Employee</a></li>
                          <li><a  href="ShiftCode#">Shift Code</a></li>
                          <li><a style="color:#f2f2f2;" href="Company#">Company<span style="float:right;margin-top:5%;"class="glyphicon glyphicon-circle-arrow-left"></a></li>
                          <li><a  href="DayType#">Day Type</a></li>
                          <li><a  href="MandatoryTaxTables#">Mandatory & Tax Tables</a></li>
                          <li><a  href="OtherIncome#">Other Income</a></li>
                          <li><a  href="SystemTables#">System Tables</a></li>
                          <li><a  href="OtherDeduction#">Other Deduction</a></li>
                          <li><a  href="Users#">Users</a></li>
                          <li><a  href="ChangeShiftCode#">Change Shift Code</a></li>
                          <li><a  href="Settings#">Settings</a></li>
                      </ul>
                  </li>

                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-desktop"></i>
                          <span>Activities</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="DTR#">DTR</a></li>
                          <li><a  href="PayrollOtherIncome#">Payroll Other Income</a></li>
                          <li><a  href="PayrollOtherDeduction#">Payroll Other Deduction</a></li>
                          <li><a  href="LeaveApplication#">Leave Application</a></li>
                          <li><a  href="LastWithholdingTax#">Last Withholding Tax</a></li>
                          <li><a  href="OvertimeApplication#">Overtime Application</a></li>
                          <li><a  href="Loans#">Loans</a></li>
                          <li><a  href="Payroll#">Payroll</a></li>
                      </ul>
                  </li>
                  <li class="sub-menu">
                      <a href="javascript:;" >
                          <i class="fa fa-book"></i>
                          <span>Reports</span>
                      </a>
                      <ul class="sub">
                          <li><a  href="DTRReports#">DTR Reports</a></li>
                          <li><a  href="LeaveReports#">Leave Reports</a></li>
                          <li><a  href="PayrollReports#">Payroll Reports</a></li>
                          <li><a  href="LoanReports#">Loan Reports</a></li>
                          <li><a  href="MandatoryReports#">Mandatory Reports</a></li>
                          <li><a  href="AccountingReports#">Accounting Reports</a></li>
                          <li><a  href="WithholdingTaxReports#">Withholding Tax Reports</a></li>
                          <li><a  href="ATMBank#">ATM/Bank</a></li>
                          <li><a  href="Demographics#">Demographics</a></li>
                      </ul>
                  </li>
              </ul>
              <!-- sidebar menu end-->
          </div>
      </aside>
      <!--sidebar end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              <div class="container" style="width:100%;">
                <h2></h2>
                    <div class="panel panel-default">
                    <div class="panel-heading">Company</div>
                        <div class="panel-body"style="height:inherit;">
                            <section class="content">
                                <div class="row">
                                    <div class="col-xs-12">
                                    <!--table container-->
                                        <div class="box">
                                            <div class="row">
                                                <div class="col-xs-6 col-sm-1"style="width:120px;">
                                                    <!--<span class="btn-group pull-right">
                                                    <h5>Payroll Group</h5>
                                                    </span>-->
                                                </div>
                                                <div class="col-xs-6 col-sm-2">
                                                    <!--<div id="theAutoComplete" class="pull-left" ></div>-->
                                                </div>
                                                <div class="col-xs-6 col-sm-3">
                                                    <div class="input-group" >
                                                    <span class='btn-group'style="padding-bottom:2%;">
                                                        <input type="text" class="form-control input-sm" id="filter" placeholder="Search"style="width:200px; height:inherit;">
                                                        <button class="btn btn-sm btn-default" style="padding: 5px 10px;"><i class="fa fa-search"></i></button>
                                                    </span>
                                                    </div>
                                                </div>
                                                <div class="col-xs-6 col-sm-5" style="width:40%; float:right;">
                                                    <div class="input-group btn-sm pull-right" >
                                                        <div class="btn-group-horizontal ">
                                                        <a href="~/Software/AddShiftCode" class="btn btn-primary"style="font-size: 15px;width:160px;background-color:#443557;border-color:#443557;"><i class="fa fa-plus"></i> Add</a>
                                                        <a href="~/Software/MainMenu" class="btn btn-danger "style="font-size: 15px;width:160px;background-color:#443557;border-color:#443557;"><i class="fa fa-close"></i> Close</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        <div class="row">
                                        <div class="col-md-6">
                                        <!--<h5 style="width:100px;">Payroll Group</h5>-->
                                        </div>
                                        <div class="col-md-6">
                                        <div class="btn-group-horizontal btn-sm pull-right">
                                        <!--<a href="~/Software/AddEmployee" class="btn btn-primary"><i class="fa fa-plus"></i> Add</a>
                                        <a href="~/Software/Dashboard" class="btn btn-danger "><i class="fa fa-close"></i> Close</a>-->
                                        </div>
                                        </div>
                                        </div>
                                        <!--table-->
                                        <table id="itemCollectionGrid" class="grid border-custom"></table>
                                        </div>
                                    </div>
                                </div>
                                <!--navigation buttons-->
                                <div class="btn-group pull-right" id="navigationPageGrid">
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToFirstPageGrid">
                                    <span class="glyphicon glyphicon-fast-backward"></span>
                                    </button>
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToPreviousPageGrid">
                                    <span class="glyphicon glyphicon-step-backward"></span>
                                    </button>
                                    <button type="button" class="btn btn-default border-custom" disabled style="width: 100px" id="btnCurrentPageGrid"></button>
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToNextPageGrid">
                                    <span class="glyphicon glyphicon-step-forward"></span>
                                    </button>
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToLastPageGrid">
                                    <span class="glyphicon glyphicon-fast-forward"></span>
                                    </button>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
          </section>
      </section>
      <script type="text/javascript">
                //================
                // Global variables
                // ================
                var itemCollections;
                var itemGrid;
                var editItem;
                var lastCount = 0;
                var btnFirstPageGrid;
                var btnPreviousPageGrid;
                var btnNextPageGrid;
                var btnLastPageGrid;
                var btnCurrentPageGrid;
                // =============================
                // Get CompanyList Data
                // =============================
                function getCompanyList() {
                    var ItemList = new wijmo.collections.ObservableArray();
                    // $("#loadingModal").modal("show");
                    $.ajax({
                        url: '/api/company/list',
                        cache: false,
                        type: 'GET',
                        contentType: 'application/json; charset=utf-8',
                        data: {},
                        success: function (results) {
                            // $("#loadingModal").modal("hide");
                            if (results.length > 0) {
                                for (i = 0; i < results.length; i++) {
                                    ItemList.push({
                                        company: results[i]["company"],
                                        address: results[i]["address"],                                    
                                        isLocked: results[i]["isLocked"],
                                        editId: "<button class='btn btn-primary btn-xs btn-block' id='itemEditButton' onclick='cmdItemEditButton_OnClick()'><i class='fa fa-pencil'></i> Edit</button>",
                                        deleteId: "<button class='btn btn-danger btn-xs btn-block' id='itemDeleteButton' onclick='cmdItemDeleteButton_OnClick()'><i class='fa fa-trash'></i> Delete</button>",
                                    });
                                }
                                itemCollections = new wijmo.collections.CollectionView(ItemList);
                                btnCurrentPageGrid.innerHTML = (itemCollections.pageIndex + 1) + ' / ' + itemCollections.pageCount;
                                itemCollections.canFilter = true;
                                itemCollections.pageSize = 15;
                                if(itemGrid){
                                    itemGrid.dispose();
                                }   
                                //Flex Grid
                                itemGrid = new wijmo.grid.FlexGrid('#itemCollectionGrid');
                                itemGrid.itemSource = itemCollections;
                                var filter = '';
                                itemCollections.filter = function(item) {
                                    return !filter || item.company.toLowerCase().indexOf(filter) > -1;
                                }
                                
                                var dvFilter = document.getElementById('filter');
                                dvFilter.addEventListener('input', function() {
                                    filter = dvFilter.value.toLowerCase();
                                    itemCollections.refresh();
                            //        grid.itemsSource = cv.items;        
                                });
                                itemGrid.initialize({
                                    columns: [
                                    {
                                        "header": "Company",
                                        "binding": "company",
                                        "align": "center",
                                        "allowSorting": true,
                                        "isContentHtml": true,
                                        "width": ".25*"
                                    },
                                    {
                                        "header": "Address",
                                        "binding": "address",
                                        "align": "center",
                                        "allowSorting": true,
                                        "width": ".50*"
                                    },
                                    {
                                        "header": "L",
                                        "binding": "isLocked",
                                        "align": "center",
                                        "allowSorting": true,
                                        "isContentHtml": true,
                                        "width": ".25*"
                                    },
                                    {
                                        "header": "Edit",
                                        "binding": "editId",
                                        "width": 70,
                                        "align": "center",
                                        "isContentHtml": true
                                    },
                                    {
                                        "header": "Delete",
                                        "binding": "deleteId",
                                        "width": 70,
                                        "align": "center",
                                        "isContentHtml": true
                                    },
                                    ],
                                    autoGenerateColumns: false,
                                    itemsSource: itemCollections,
                                    isReadOnly: true,
                                    autoSizeMode: wijmo.grid.AutoSizeMode.Both,
                                    allowDragging: wijmo.grid.AllowDragging.None,
                                    selectionMode: wijmo.grid.SelectionMode.Row
                                });
                                itemGrid.trackChanges = true;
                                updateNavigateButtonsCollection();
                                btnFirstPageGrid.addEventListener('click', function () {
                                    itemCollections.moveToFirstPage();
                                    updateNavigateButtonsCollection();
                                });
                                btnPreviousPageGrid.addEventListener('click', function () {
                                    itemCollections.moveToPreviousPage();
                                    updateNavigateButtonsCollection();
                                });
                                btnNextPageGrid.addEventListener('click', function () {
                                    itemCollections.moveToNextPage();
                                    updateNavigateButtonsCollection();
                                });
                                btnLastPageGrid.addEventListener('click', function () {
                                    itemCollections.moveToLastPage();
                                    updateNavigateButtonsCollection();
                                });
                            }
                        }
                    });
                }
                //===========================
                // On Page Load
                // ==========================
                $(document).ready(function () {
                    //Collection View
                    btnCurrentPageGrid = document.getElementById('btnCurrentPageGrid');
                    getCompanyList();
                    var ac = new wijmo.input.AutoComplete('#theAutoComplete', {
                    });
                });
            </script>
      <!--main content end-->
      <!--footer start-->
      <footer class="site-footer">
          <div class="text-center">
              2016 - Hris Innosoft Solution Inc. 
              <a href="ShiftCode#" class="go-top">
                  <i class="fa fa-angle-up"></i>
              </a>
          </div>
      </footer>
      <!--footer end-->

</section>
