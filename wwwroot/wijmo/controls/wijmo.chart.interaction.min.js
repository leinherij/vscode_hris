/*
    *
    * Wijmo Library 5.20151.48
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    * 
    * Licensed under the Wijmo Commercial License. 
    * sales@wijmo.com
    * http://wijmo.com/products/wijmo-5/license/
    *
    */
var wijmo;(function(n){(function(t){(function(i){"use strict";(function(n){n[n.X=0]="X";n[n.Y=1]="Y"})(i.Orientation||(i.Orientation={}));var r=i.Orientation,u=function(){function i(t,i){this._isVisible=!0;this._min=null;this._max=null;this._orientation=0;this._chart=null;this._rangeSelectorEle=null;this._leftEle=null;this._middleEle=null;this._rightEle=null;this._movingEle=null;this._minPos=0;this._maxPos=1;this._startPt=null;this._movingOffset=null;this._wrapperMousedown=null;this._wrapperMouseMove=null;this._wrapperMouseup=null;this._isTouch=!1;this.rangeChanged=new n.Event;t||n.assert(!1,"The FlexChart cannot be null.");this._isTouch="ontouchstart"in window;this._chart=t;n.copy(this,i);this._createRangeSelector()}return Object.defineProperty(i.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){if(t!=this._isVisible){if(this._isVisible=n.asBoolean(t),!this._rangeSelectorEle)return;this._rangeSelectorEle.style.visibility=this._isVisible?"visible":"hidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(t){t!==this._min&&(this._min=n.asNumber(t,!0,!1),this._changeRange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){t!==this._max&&(this._max=n.asNumber(t,!0,!1),this._changeRange())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this._orientation},set:function(t){t!==this._orientation&&(this._orientation=n.asEnum(t,r),this._invalidate())},enumerable:!0,configurable:!0}),i.prototype.onRangeChanged=function(n){this.rangeChanged.raise(this,n)},i.prototype.remove=function(){this._rangeSelectorEle&&(this._chart.hostElement.removeChild(this._rangeSelectorEle),this._switchEvent(!1),this._rangeSelectorEle=null)},i.prototype._createRangeSelector=function(){var r=this._chart,u=r.hostElement,f=this,t=this._getScrollerClass();this._rangeSelectorEle=n.createElement('<div class="'+i._CSS_RANGE_SELECTOR+'"><div class="'+i._CSS_SCROLLER_CENTER+' middle"><\/div><div class="'+t+' left"><\/div><div class="'+t+' right"><\/div>');this._rangeSelectorEle.style.visibility=this._isVisible?"visible":"hidden";u.appendChild(this._rangeSelectorEle);this._leftEle=this._rangeSelectorEle.querySelector(".left");this._middleEle=this._rangeSelectorEle.querySelector(".middle");this._rightEle=this._rangeSelectorEle.querySelector(".right");this._wrapperMousedown=this._onMousedown.bind(this);this._wrapperMouseMove=this._onMouseMove.bind(this);this._wrapperMouseup=this._onMouseup.bind(this);this._switchEvent(!0)},i.prototype._switchEvent=function(n){var t=n?"addEventListener":"removeEventListener",i=n?"addHandler":"removeHandler";this._rangeSelectorEle&&(this._rangeSelectorEle[t]("mousedown",this._wrapperMousedown),this._rangeSelectorEle[t]("mousemove",this._wrapperMouseMove),this._rangeSelectorEle[t]("mouseup",this._wrapperMouseup),"ontouchstart"in window&&(this._rangeSelectorEle[t]("touchstart",this._wrapperMousedown),this._rangeSelectorEle[t]("touchmove",this._wrapperMouseMove),this._rangeSelectorEle[t]("touchend",this._wrapperMouseup)));this._chart.hostElement&&(this._chart.hostElement[t]("mousemove",this._wrapperMouseMove),this._chart.hostElement[t]("mouseup",this._wrapperMouseup),"ontouchstart"in window&&(this._chart.hostElement[t]("touchmove",this._wrapperMouseMove),this._chart.hostElement[t]("touchend",this._wrapperMouseup)),this._chart.rendered[i](this._refresh,this))},i.prototype._refresh=function(){var f=this._chart.hostElement,u,r,i,e=n.getElementRect(this._rangeSelectorEle);u=f.querySelector("."+t.FlexChart._CSS_PLOT_AREA);r=n.getElementRect(u);i=u.getBBox();this._plotBox={x:r.left,y:r.top,width:i.width,height:i.height};this._relaPlotBox={x:i.x,y:r.top-e.top,width:i.width,height:i.height};this._adjustMinAndMax();this._updateElesPosition()},i.prototype._adjustMinAndMax=function(){var f=this._chart,n=this,i=n._min,r=n._max,e=this._orientation===0?f.axisX:f.axisY,t=e.actualMin,u=e.actualMax,o=u-t;n._min=i===null||i===undefined||i<t||i>u?t:i;n._max=r===null||r===undefined||r<t||r>u?u:r;n._minPos=(n._min-t)/o;n._maxPos=(n._max-t)/o},i.prototype._updateElesPosition=function(){var i=this._leftEle,s=this._middleEle,r=this._rightEle,t=this._relaPlotBox,f,e,o,u=this._orientation===0;t&&(f=u?{left:t.x+this._minPos*t.width-.5*i.offsetWidth-2,top:t.y-2,height:t.height}:{left:t.x-2,top:t.y+(1-this._minPos)*t.height-.5*r.offsetHeight-2,width:t.width},e=u?{left:t.x+this._minPos*t.width,top:t.y,width:(this._maxPos-this._minPos)*t.width,height:t.height}:{left:t.x,top:t.y+(1-this._maxPos)*t.height,height:(this._maxPos-this._minPos)*t.height,width:t.width},o=u?{left:t.x+this._maxPos*t.width-.5*r.offsetWidth-2,top:t.y-2,height:t.height}:{left:t.x-2,top:t.y+(1-this._maxPos)*t.height-.5*i.offsetHeight-2,width:t.width},n.setCss(i,f),n.setCss(s,e),n.setCss(r,o))},i.prototype._invalidate=function(){var t,r;this._rangeSelectorEle&&(t=this._getScrollerClass(),r=this._orientation===0?i.VSCROLLERCSS:i.HSCROLLERCSS,[this._leftEle,this._rightEle].forEach(function(i){i.removeAttribute("style");n.removeClass(i,r);n.addClass(i,t)}),this._middleEle.removeAttribute("style"),this._chart.refresh())},i.prototype._changeRange=function(){(this._adjustMinAndMax(),this._rangeSelectorEle)&&(this._updateElesPosition(),this.onRangeChanged())},i.prototype._getScrollerClass=function(){return this._orientation===0?i.HSCROLLERCSS:i.VSCROLLERCSS},i.prototype._onMousedown=function(t){this._isVisible&&(this._movingEle=t.srcElement||t.target,this._startPt=t instanceof MouseEvent?new n.Point(t.pageX,t.pageY):new n.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY),this._movingOffset=n.getElementRect(this._movingEle),this._movingEle!=this._middleEle?this._orientation===0?this._movingOffset.left+=.5*this._movingEle.offsetWidth:this._movingOffset.top+=.5*this._movingEle.offsetHeight:this._range=this._maxPos-this._minPos,t.preventDefault())},i.prototype._onMouseMove=function(t){if(this._isVisible){var i=t instanceof MouseEvent?new n.Point(t.pageX,t.pageY):new n.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY);this._onMove(i);t.preventDefault()}},i.prototype._onMove=function(n){var u=this._startPt,e=this._movingOffset,i=this._plotBox,r=this._range,f=this._movingEle,h=this._leftEle,c=this._middleEle,l=this._rightEle,o,s,t;u&&(this._orientation===0?(o=e.left+n.x-u.x,t=(o-i.x)/i.width):(s=e.top+n.y-u.y,t=1-(s-i.y)/i.height),t<0?t=0:t>1&&(t=1),f===h?(t>this._maxPos&&(t=this._maxPos),this._minPos=t):f===l?(t<this._minPos&&(t=this._minPos),this._maxPos=t):f===c&&(this._orientation===0?(this._minPos=t,this._maxPos=this._minPos+r,this._maxPos>=1&&(this._maxPos=1,this._minPos=this._maxPos-r)):(this._maxPos=t,this._minPos=this._maxPos-r,this._minPos<=0&&(this._minPos=0,this._maxPos=this._minPos+r))),this._updateElesPosition())},i.prototype._onMouseup=function(n){var i,r,t,f,u;this._isVisible&&(i=this._chart,r=this._orientation===0?i.axisX:i.axisY,t=r.actualMin,f=r.actualMax,u=f-t,this._startPt&&(this._startPt=this._movingOffset=null,this._min=t+this._minPos*u,this._max=t+this._maxPos*u,this.onRangeChanged(),n.preventDefault()))},i._CSS_RANGE_SELECTOR="wj-rangeselector",i._CSS_SCROLLER_CENTER="wj-scroller-center",i._CSS_RANGE_SCROLLER="wj-scroller",i._CSS_HORIZONTAL_SCROLLER="wj-hscroller",i._CSS_VERTICAL_SCROLLER="wj-vscroller",i.HSCROLLERCSS=i._CSS_RANGE_SCROLLER+" "+i._CSS_HORIZONTAL_SCROLLER,i.VSCROLLERCSS=i._CSS_RANGE_SCROLLER+" "+i._CSS_VERTICAL_SCROLLER,i}();i.RangeSelector=u})(t.interaction||(t.interaction={}));var i=t.interaction})(n.chart||(n.chart={}));var t=n.chart})(wijmo||(wijmo={}))